
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../examples/">
      
      
        <link rel="next" href="../unions_theory/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.10">
    
    
      
        <title>pytest goodies - pytest_cases</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fad675c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pytest-goodies" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="pytest_cases" class="md-header__button md-logo" aria-label="pytest_cases" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pytest_cases
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              pytest goodies
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/smarie/python-pytest-cases" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="pytest_cases" class="md-nav__button md-logo" aria-label="pytest_cases" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    pytest_cases
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/smarie/python-pytest-cases" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    pytest goodies
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    pytest goodies
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#fixture" class="md-nav__link">
    <span class="md-ellipsis">
      @fixture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unpack_fixture-unpack_into" class="md-nav__link">
    <span class="md-ellipsis">
      unpack_fixture / unpack_into
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#param_fixtures" class="md-nav__link">
    <span class="md-ellipsis">
      param_fixture[s]
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fixture_union" class="md-nav__link">
    <span class="md-ellipsis">
      fixture_union
    </span>
  </a>
  
    <nav class="md-nav" aria-label="fixture_union">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#idstyle" class="md-nav__link">
    <span class="md-ellipsis">
      idstyle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#marks-and-ids" class="md-nav__link">
    <span class="md-ellipsis">
      marks and ids
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unpacking" class="md-nav__link">
    <span class="md-ellipsis">
      unpacking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-conclude" class="md-nav__link">
    <span class="md-ellipsis">
      to conclude
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parametrize" class="md-nav__link">
    <span class="md-ellipsis">
      @parametrize
    </span>
  </a>
  
    <nav class="md-nav" aria-label="@parametrize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ids-and-marks" class="md-nav__link">
    <span class="md-ellipsis">
      ids and marks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#idstyle-customization" class="md-nav__link">
    <span class="md-ellipsis">
      idstyle customization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametrization-order" class="md-nav__link">
    <span class="md-ellipsis">
      parametrization order
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#passing-a-hook" class="md-nav__link">
    <span class="md-ellipsis">
      passing a hook
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assert_exception" class="md-nav__link">
    <span class="md-ellipsis">
      assert_exception
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-with-reorder" class="md-nav__link">
    <span class="md-ellipsis">
      --with-reorder
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../unions_theory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fixture unions theory
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../api_reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API reference
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#fixture" class="md-nav__link">
    <span class="md-ellipsis">
      @fixture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unpack_fixture-unpack_into" class="md-nav__link">
    <span class="md-ellipsis">
      unpack_fixture / unpack_into
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#param_fixtures" class="md-nav__link">
    <span class="md-ellipsis">
      param_fixture[s]
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fixture_union" class="md-nav__link">
    <span class="md-ellipsis">
      fixture_union
    </span>
  </a>
  
    <nav class="md-nav" aria-label="fixture_union">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#idstyle" class="md-nav__link">
    <span class="md-ellipsis">
      idstyle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#marks-and-ids" class="md-nav__link">
    <span class="md-ellipsis">
      marks and ids
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unpacking" class="md-nav__link">
    <span class="md-ellipsis">
      unpacking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-conclude" class="md-nav__link">
    <span class="md-ellipsis">
      to conclude
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parametrize" class="md-nav__link">
    <span class="md-ellipsis">
      @parametrize
    </span>
  </a>
  
    <nav class="md-nav" aria-label="@parametrize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ids-and-marks" class="md-nav__link">
    <span class="md-ellipsis">
      ids and marks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#idstyle-customization" class="md-nav__link">
    <span class="md-ellipsis">
      idstyle customization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametrization-order" class="md-nav__link">
    <span class="md-ellipsis">
      parametrization order
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#passing-a-hook" class="md-nav__link">
    <span class="md-ellipsis">
      passing a hook
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assert_exception" class="md-nav__link">
    <span class="md-ellipsis">
      assert_exception
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-with-reorder" class="md-nav__link">
    <span class="md-ellipsis">
      --with-reorder
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="pytest-goodies"><code>pytest</code> Goodies<a class="headerlink" href="#pytest-goodies" title="Permanent link">&para;</a></h1>
<p>Many <code>pytest</code> features were missing to make <code>pytest_cases</code> work with such a "no-boilerplate" experience. Many of these can be of interest to the general <code>pytest</code> audience, so they are exposed in the public API.</p>
<h2 id="fixture"><code>@fixture</code><a class="headerlink" href="#fixture" title="Permanent link">&para;</a></h2>
<p><code>@fixture</code> is similar to <code>pytest.fixture</code> but without its <code>param</code> and <code>ids</code> arguments. Instead, it is able to pick the parametrization from <code>@pytest.mark.parametrize</code> marks applied on fixtures. This makes it very intuitive for users to parametrize both their tests and fixtures. As a bonus, its <code>name</code> argument works even in old versions of pytest (which is not the case for <code>fixture</code>).</p>
<p>Finally it now supports unpacking, see <a href="#unpack_fixture-unpack_into">unpacking feature</a>.</p>
<div class="admonition note">
<p class="admonition-title"><code>@fixture</code> deprecation if/when <code>@pytest.fixture</code> supports <code>@pytest.mark.parametrize</code></p>
<p>The ability for pytest fixtures to support the <code>@pytest.mark.parametrize</code> annotation is a feature that clearly belongs to <code>pytest</code> scope, and has been <a href="https://github.com/pytest-dev/pytest/issues/3960">requested already</a>. It is therefore expected that <code>@fixture</code> will be deprecated in favor of <code>@pytest_fixture</code> if/when the <code>pytest</code> team decides to add the proposed feature. As always, deprecation will happen slowly across versions (at least two minor, or one major version update) so as for users to have the time to update their code bases.</p>
</div>
<h2 id="unpack_fixture-unpack_into"><code>unpack_fixture</code> / <code>unpack_into</code><a class="headerlink" href="#unpack_fixture-unpack_into" title="Permanent link">&para;</a></h2>
<p>In some cases fixtures return a tuple or a list of items. It is not easy to refer to a single of these items in a test or another fixture. With <code>unpack_fixture</code> you can easily do it:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">unpack_fixture</span><span class="p">,</span> <span class="n">fixture</span>

<span class="nd">@fixture</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">c</span><span class="p">(</span><span class="n">o</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">o</span><span class="p">,</span> <span class="n">o</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">unpack_fixture</span><span class="p">(</span><span class="s2">&quot;a,b&quot;</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span>
</code></pre></div>
<p>Note that you can also use the <code>unpack_into=</code> argument of <code>@fixture</code> to do the same thing:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">fixture</span>

<span class="nd">@fixture</span><span class="p">(</span><span class="n">unpack_into</span><span class="o">=</span><span class="s2">&quot;a,b&quot;</span><span class="p">)</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">c</span><span class="p">(</span><span class="n">o</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">o</span><span class="p">,</span> <span class="n">o</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">test_function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span>
</code></pre></div>
<p>And it is also available in <a href="../api_reference/#fixture_union"><code>fixture_union</code></a>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">fixture</span><span class="p">,</span> <span class="n">fixture_union</span>

<span class="nd">@fixture</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">c</span><span class="p">(</span><span class="n">o</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">o</span><span class="p">,</span> <span class="n">o</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="nd">@fixture</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;yeepee&#39;</span><span class="p">,</span> <span class="s1">&#39;yay&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="n">o</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">o</span><span class="p">,</span> <span class="n">o</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">fixture_union</span><span class="p">(</span><span class="s2">&quot;c_or_d&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">],</span> <span class="n">unpack_into</span><span class="o">=</span><span class="s2">&quot;a, b&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span>
</code></pre></div>
<h2 id="param_fixtures"><code>param_fixture[s]</code><a class="headerlink" href="#param_fixtures" title="Permanent link">&para;</a></h2>
<p>If you wish to share some parameters across several fixtures and tests, it might be convenient to have a fixture representing this parameter. This is relatively easy for single parameters, but a bit harder for parameter tuples.</p>
<p>The two utilities functions <code>param_fixture</code> (for a single parameter name) and <code>param_fixtures</code> (for a tuple of parameter names) handle the difficulty for you:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">param_fixtures</span><span class="p">,</span> <span class="n">param_fixture</span>

<span class="c1"># create a single parameter fixture</span>
<span class="n">my_parameter</span> <span class="o">=</span> <span class="n">param_fixture</span><span class="p">(</span><span class="s2">&quot;my_parameter&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">fixture_uses_param</span><span class="p">(</span><span class="n">my_parameter</span><span class="p">):</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">test_uses_param</span><span class="p">(</span><span class="n">my_parameter</span><span class="p">,</span> <span class="n">fixture_uses_param</span><span class="p">):</span>
    <span class="o">...</span>

<span class="c1"># -----</span>
<span class="c1"># create a 2-tuple parameter fixture</span>
<span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span> <span class="o">=</span> <span class="n">param_fixtures</span><span class="p">(</span><span class="s2">&quot;arg1, arg2&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">fixture_uses_param2</span><span class="p">(</span><span class="n">arg2</span><span class="p">):</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">test_uses_param2</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="n">fixture_uses_param2</span><span class="p">):</span>
    <span class="o">...</span>
</code></pre></div>
<p>You can mark any of the argvalues with <code>pytest.mark</code> to pass a custom id or a custom "skip" or "fail" mark, just as you do in <code>pytest</code>. See <a href="https://docs.pytest.org/en/stable/example/parametrize.html#set-marks-or-test-id-for-individual-parametrized-test">pytest documentation</a>.</p>
<h2 id="fixture_union"><code>fixture_union</code><a class="headerlink" href="#fixture_union" title="Permanent link">&para;</a></h2>
<p>As of <code>pytest</code> 5, it is not possible to create a "union" fixture, i.e. a parametrized fixture that would first take all the possible values of fixture A, then all possible values of fixture B, etc. Indeed all fixture dependencies (a.k.a. "closure") of each test node are grouped together, and if they have parameters a big "cross-product" of the parameters is done by <code>pytest</code>.</p>
<p>The topic has been largely discussed in <a href="https://github.com/pytest-dev/pytest/issues/349">pytest-dev#349</a> and a <a href="https://docs.pytest.org/en/latest/proposals/parametrize_with_fixtures.html">request for proposal</a> has been finally made.</p>
<p><a href="../api_reference/#fixture_union"><code>fixture_union</code></a> is an implementation of this proposal. It is also used by <a href="../api_reference/#parametrize"><code>@parametrize</code></a> to support <a href="../api_reference/#fixture_ref"><code>fixture_ref</code></a> in parameter values, see <a href="#parametrize">below</a>. The theory is presented in more details in <a href="../unions_theory/">this page</a>, while below are more practical examples.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">fixture</span><span class="p">,</span> <span class="n">fixture_union</span>

<span class="nd">@fixture</span>
<span class="k">def</span> <span class="nf">first</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;hello&#39;</span>

<span class="nd">@fixture</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">second</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span>

<span class="c1"># c will first take all the values of &#39;first&#39;, then all of &#39;second&#39;</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">fixture_union</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">test_basic_union</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</code></pre></div>
<p>yields</p>
<div class="highlight"><pre><span></span><code>&lt;...&gt;::test_basic_union[\first] hello   PASSED
&lt;...&gt;::test_basic_union[\second-a] a    PASSED
&lt;...&gt;::test_basic_union[\second-b] b    PASSED
</code></pre></div>
<h3 id="idstyle">idstyle<a class="headerlink" href="#idstyle" title="Permanent link">&para;</a></h3>
<p>As you can see the ids of union fixtures are slightly different from standard ids, so that you can easily understand what is going on. You can change this feature with <code>ìdstyle</code>, see <a href="../api_reference/#fixture_union">API documentation</a> for details.</p>
<h3 id="marks-and-ids">marks and ids<a class="headerlink" href="#marks-and-ids" title="Permanent link">&para;</a></h3>
<p>You can mark any of the alternatives with <code>pytest.mark</code> to pass a custom id or a custom "skip" or "fail" mark, just as you do in <code>pytest</code>. See <a href="https://docs.pytest.org/en/stable/example/parametrize.html#set-marks-or-test-id-for-individual-parametrized-test">pytest documentation</a>.</p>
<h3 id="unpacking">unpacking<a class="headerlink" href="#unpacking" title="Permanent link">&para;</a></h3>
<p>Fixture unions also support unpacking with the <code>unpack_into</code> argument, see <a href="#unpack_fixture-unpack_into">unpacking feature</a>.</p>
<h3 id="to-conclude">to conclude<a class="headerlink" href="#to-conclude" title="Permanent link">&para;</a></h3>
<p>Fixture unions are a <strong>major change</strong> in the internal pytest engine, as fixture closures (the ordered set of all fixtures required by a test node to run - directly or indirectly) now become trees where branches correspond to alternative paths taken in the "unions", and leafs are the alternative fixture closures. This feature has been tested in very complex cases (several union fixtures, fixtures that are not selected by a given union but that is requested by the test function, etc.). But if you find some strange behaviour don't hesitate to report it in the <a href="https://github.com/smarie/python-pytest-cases/issues">issues</a> page !</p>
<p><strong>IMPORTANT</strong> if you do not use <code>@fixture</code> but only <code>@pytest.fixture</code>, then you will see that your fixtures are called even when they are not used, with a parameter <code>NOT_USED</code>. This symbol is automatically ignored if you use <code>@fixture</code>, otherwise you have to handle it. Alternatively you can use <code>@ignore_unused</code> on your fixture function.</p>
<div class="admonition note">
<p class="admonition-title">fixture unions vs. cases</p>
<p>If you're familiar with <code>pytest-cases</code> already, you might note that <code>@cases_data</code> is not so different than a fixture union: we do a union of all case functions. If one day union fixtures are directly supported by <code>pytest</code>, we will probably refactor this lib to align all the concepts.</p>
</div>
<h2 id="parametrize"><code>@parametrize</code><a class="headerlink" href="#parametrize" title="Permanent link">&para;</a></h2>
<p><a href="../api_reference/#parametrize"><code>@parametrize</code></a> is a replacement for <code>@pytest.mark.parametrize</code> with many additional features to make the most of parametrization. See <a href="../api_reference/#parametrize">API reference</a> for details about all the new features. In particular it allows you to include references to fixtures and to value-generating functions in the parameter values. </p>
<ul>
<li>Simply use <a href="../api_reference/#fixture_ref"><code>fixture_ref(&lt;fixture&gt;)</code></a> in the parameter values, where <code>&lt;fixture&gt;</code> can be the fixture name or fixture function. New: from version <code>3.2</code> on, if <code>auto_refs=True</code> (default), <code>@parametrize</code> will automatically detect fixture symbols in the list of argvalues, and will create <code>fixture_ref</code>s automatically around them so that you don't need to.</li>
<li>if you do not wish to create a fixture, you can also use <a href="../api_reference/#lazy_value"><code>lazy_value(&lt;function&gt;)</code></a></li>
<li>Note that when parametrizing several argnames, both <a href="../api_reference/#fixture_ref"><code>fixture_ref</code></a> and <a href="../api_reference/#lazy_value"><code>lazy_value</code></a> can be used <em>as</em> the tuple, or <em>in</em> the tuple. Several <a href="../api_reference/#fixture_ref"><code>fixture_ref</code></a> and/or <a href="../api_reference/#lazy_value"><code>lazy_value</code></a> can be used in the same tuple, too.</li>
<li>By default the id associated with a <a href="../api_reference/#fixture_ref"><code>fixture_ref</code></a> or a <a href="../api_reference/#lazy_value"><code>lazy_value</code></a> is the name of the fixture or function. Custom ids can be passed with the <code>id=&lt;id&gt;</code> parameter. </li>
</ul>
<p>For example, with a single argument:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">parametrize</span><span class="p">,</span> <span class="n">fixture</span><span class="p">,</span> <span class="n">fixture_ref</span><span class="p">,</span> <span class="n">lazy_value</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">world_str</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;world&#39;</span>

<span class="k">def</span> <span class="nf">whatfun</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;what&#39;</span>

<span class="nd">@fixture</span>
<span class="nd">@parametrize</span><span class="p">(</span><span class="s1">&#39;who&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">world_str</span><span class="p">,</span> <span class="s1">&#39;you&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">greetings</span><span class="p">(</span><span class="n">who</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;hello &#39;</span> <span class="o">+</span> <span class="n">who</span>

<span class="nd">@parametrize</span><span class="p">(</span><span class="s1">&#39;main_msg&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;nothing&#39;</span><span class="p">,</span> 
                          <span class="n">fixture_ref</span><span class="p">(</span><span class="n">world_str</span><span class="p">),</span>
                          <span class="n">lazy_value</span><span class="p">(</span><span class="n">whatfun</span><span class="p">),</span>
                          <span class="s2">&quot;1&quot;</span><span class="p">,</span>
                          <span class="n">fixture_ref</span><span class="p">(</span><span class="n">greetings</span><span class="p">)],</span> 
             <span class="n">auto_refs</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s1">&#39;ending&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;!&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">test_prints</span><span class="p">(</span><span class="n">main_msg</span><span class="p">,</span> <span class="n">ending</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">main_msg</span> <span class="o">+</span> <span class="n">ending</span><span class="p">)</span>
</code></pre></div>
<p>yields the following</p>
<div class="highlight"><pre><span></span><code>&gt;<span class="w"> </span>pytest<span class="w"> </span>-s<span class="w"> </span>-v
collected<span class="w"> </span><span class="m">12</span><span class="w"> </span>items
test_prints<span class="o">[</span>nothing-?<span class="o">]</span><span class="w"> </span>PASSED<span class="w">                   </span><span class="o">[</span><span class="w">  </span><span class="m">8</span>%<span class="o">]</span>nothing?
test_prints<span class="o">[</span>nothing-!<span class="o">]</span><span class="w"> </span>PASSED<span class="w">                   </span><span class="o">[</span><span class="w"> </span><span class="m">16</span>%<span class="o">]</span>nothing!
test_prints<span class="o">[</span>world_str-?<span class="o">]</span><span class="w"> </span>PASSED<span class="w">                 </span><span class="o">[</span><span class="w"> </span><span class="m">25</span>%<span class="o">]</span>world?
test_prints<span class="o">[</span>world_str-!<span class="o">]</span><span class="w"> </span>PASSED<span class="w">                 </span><span class="o">[</span><span class="w"> </span><span class="m">33</span>%<span class="o">]</span>world!
test_prints<span class="o">[</span>whatfun-?<span class="o">]</span><span class="w"> </span>PASSED<span class="w">                   </span><span class="o">[</span><span class="w"> </span><span class="m">41</span>%<span class="o">]</span>what?
test_prints<span class="o">[</span>whatfun-!<span class="o">]</span><span class="w"> </span>PASSED<span class="w">                   </span><span class="o">[</span><span class="w"> </span><span class="m">50</span>%<span class="o">]</span>what!
test_prints<span class="o">[</span><span class="m">1</span>-?<span class="o">]</span><span class="w"> </span>PASSED<span class="w">                         </span><span class="o">[</span><span class="w"> </span><span class="m">58</span>%<span class="o">]</span><span class="m">1</span>?
test_prints<span class="o">[</span><span class="m">1</span>-!<span class="o">]</span><span class="w"> </span>PASSED<span class="w">                         </span><span class="o">[</span><span class="w"> </span><span class="m">66</span>%<span class="o">]</span><span class="m">1</span>!
test_prints<span class="o">[</span>greetings-world_str-?<span class="o">]</span><span class="w"> </span>PASSED<span class="w">       </span><span class="o">[</span><span class="w"> </span><span class="m">75</span>%<span class="o">]</span>hello<span class="w"> </span>world?
test_prints<span class="o">[</span>greetings-world_str-!<span class="o">]</span><span class="w"> </span>PASSED<span class="w">       </span><span class="o">[</span><span class="w"> </span><span class="m">83</span>%<span class="o">]</span>hello<span class="w"> </span>world!
test_prints<span class="o">[</span>greetings-you-?<span class="o">]</span><span class="w"> </span>PASSED<span class="w">             </span><span class="o">[</span><span class="w"> </span><span class="m">91</span>%<span class="o">]</span>hello<span class="w"> </span>you?
test_prints<span class="o">[</span>greetings-you-!<span class="o">]</span><span class="w"> </span>PASSED<span class="w">             </span><span class="o">[</span><span class="m">100</span>%<span class="o">]</span>hello<span class="w"> </span>you!
</code></pre></div>
<h3 id="ids-and-marks">ids and marks<a class="headerlink" href="#ids-and-marks" title="Permanent link">&para;</a></h3>
<p>You can also mark any of the argvalues with <code>pytest.param</code> to pass a custom id or a custom "skip" or "fail" mark, just as you do in <code>pytest</code>. See <a href="https://docs.pytest.org/en/stable/example/parametrize.html#set-marks-or-test-id-for-individual-parametrized-test">pytest documentation</a>.</p>
<p>You can also pass a custom callable or generator in <code>ids</code> as in <code>@pytest.mark.parametrize</code>.</p>
<h3 id="idstyle-customization">idstyle customization<a class="headerlink" href="#idstyle-customization" title="Permanent link">&para;</a></h3>
<p>As you can see in the example above, the default ids are similar to what you would intuitively expect, even when you use <a href="../api_reference/#fixture_ref"><code>fixture_ref</code></a>.</p>
<p>This is because by default <code>idstyle=None</code>, to preserve test ids very close to standard <code>pytest</code> by default. But still, a <code>fixture_union</code> is generated behind the scenes when there is a fixture reference. So this is actually non-standard. You may therefore prefer to see explicit ids showing the various fixture alternatives, as in <a href="#fixture_union"><code>fixture_union</code></a>. For this simply set the <code>idstyle</code> to <code>'compact'</code>, <code>'explicit'</code> or to a callable such as <code>str</code>.</p>
<p>For example, changing the previous example to add <code>idstyle="explicit"</code>:</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="o">...</span><span class="n">same</span> <span class="k">as</span> <span class="n">above</span><span class="o">...</span><span class="p">)</span>

<span class="nd">@parametrize</span><span class="p">(</span><span class="s1">&#39;main_msg&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;nothing&#39;</span><span class="p">,</span>
                          <span class="n">fixture_ref</span><span class="p">(</span><span class="n">world_str</span><span class="p">),</span>
                          <span class="n">lazy_value</span><span class="p">(</span><span class="n">whatfun</span><span class="p">),</span>
                          <span class="s2">&quot;1&quot;</span><span class="p">,</span>
                          <span class="n">fixture_ref</span><span class="p">(</span><span class="n">greetings</span><span class="p">)],</span> <span class="n">idstyle</span><span class="o">=</span><span class="s2">&quot;explicit&quot;</span><span class="p">)</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s1">&#39;ending&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;!&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">test_prints</span><span class="p">(</span><span class="n">main_msg</span><span class="p">,</span> <span class="n">ending</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">main_msg</span> <span class="o">+</span> <span class="n">ending</span><span class="p">)</span>
</code></pre></div>
<p>yields to </p>
<div class="highlight"><pre><span></span><code>&gt; pytest -s -v
collected 12 items
test_prints[main_msg\nothing-?] PASSED                [  8%]nothing?
test_prints[main_msg\nothing-!] PASSED                [ 16%]nothing!
test_prints[main_msg\world_str-?] PASSED              [ 25%]world?
test_prints[main_msg\world_str-!] PASSED              [ 33%]world!
test_prints[main_msg\P2:4-whatfun-?] PASSED           [ 41%]what?
test_prints[main_msg\P2:4-whatfun-!] PASSED           [ 50%]what!
test_prints[main_msg\P2:4-1-?] PASSED                 [ 58%]1?
test_prints[main_msg\P2:4-1-!] PASSED                 [ 66%]1!
test_prints[main_msg\greetings-world_str-?] PASSED    [ 75%]hello world?
test_prints[main_msg\greetings-world_str-!] PASSED    [ 83%]hello world!
test_prints[main_msg\greetings-you-?] PASSED          [ 91%]hello you?
test_prints[main_msg\greetings-you-!] PASSED          [100%]hello you!
</code></pre></div>
<p>You can see that with this explicit style, the various "alternatives" in the fixture union generated behind the scenes for the <code>main_msg</code> parameter appear explicitly. In particular you see that there is an alternative <code>main_msg\P2:4</code> covering several parameters in a row.</p>
<p>Note that this <code>idstyle</code> is not taken into account if you only use <a href="../api_reference/#lazy_value"><code>lazy_value</code></a>s but no <code>fixture_ref</code>, as <code>lazy_value</code>s do not require to create a fixture union behind the scenes.</p>
<h3 id="parametrization-order">parametrization order<a class="headerlink" href="#parametrization-order" title="Permanent link">&para;</a></h3>
<p>Another consequence of using <a href="../api_reference/#fixture_ref"><code>fixture_ref</code></a> is that the priority order of the parameters, relative to other standard <code>pytest.mark.parametrize</code> parameters that you would place on the same function, will get impacted. You may solve this by replacing your other <code>@pytest.mark.parametrize</code> calls with <code>param_fixture</code>s so that all the parameters are fixtures (see <a href="#param_fixtures"><code>param_fixture</code></a>).</p>
<h2 id="passing-a-hook">passing a <code>hook</code><a class="headerlink" href="#passing-a-hook" title="Permanent link">&para;</a></h2>
<p>As per version <code>1.14</code>, all the above functions now support passing a <code>hook</code> argument. This argument should be a callable. It will be called every time a fixture is about to be created by <code>pytest_cases</code> on your behalf. The fixture function is passed as the argument of the hook, and the hook should return it as the result.</p>
<p>You can use this fixture to better understand which fixtures are created behind the scenes, and also to decorate the fixture functions before they are created. For example you can use <code>hook=saved_fixture</code> (from <a href="https://smarie.github.io/python-pytest-harvest/"><code>pytest-harvest</code></a>) in order to save the created fixtures in the fixture store.  </p>
<h2 id="assert_exception"><code>assert_exception</code><a class="headerlink" href="#assert_exception" title="Permanent link">&para;</a></h2>
<p><code>assert_exception</code> context manager is an alternative to <code>pytest.raises</code> to check exceptions in your tests. You can either check type, instance equality, repr string pattern, or use custom validation functions. See <a href="../api_reference/">API reference</a>.</p>
<h2 id="-with-reorder"><code>--with-reorder</code><a class="headerlink" href="#-with-reorder" title="Permanent link">&para;</a></h2>
<p><code>pytest</code> postprocesses the order of the collected items in order to optimize setup/teardown of session, module and class fixtures. This optimization algorithm happens at the <code>pytest_collection_modifyitems</code> stage, and is still under improvement, as can be seen in <a href="https://github.com/pytest-dev/pytest/pull/3551">pytest#3551</a>, <a href="https://github.com/pytest-dev/pytest/issues/3393">pytest#3393</a>, <a href="https://github.com/pytest-dev/pytest/issues/2846">#2846</a>...</p>
<p>Besides other plugins such as <a href="https://github.com/not-raspberry/pytest_reorder">pytest-reorder</a> can modify the order as well.</p>
<p>This new commandline is a goodie to change the reordering:</p>
<ul>
<li>
<p><code>--with-reorder normal</code> is the default behaviour: it lets pytest and all the plugins execute their reordering in each of their <code>pytest_collection_modifyitems</code> hooks, and simply does not interact </p>
</li>
<li>
<p><code>--with-reorder skip</code> allows you to restore the original order that was active before <code>pytest_collection_modifyitems</code> was initially called, thus not taking into account any reordering done by pytest or by any of its plugins.</p>
</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c14ae12.min.js"></script>
      
    
  </body>
</html>